<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>C: 建設/Construction
 - industry test 08 月 15 日 4 回目 | AtCoder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="
">
    <meta name="keyword" content="AtCoder,アットコーダー,あっとこーだー,プログラミングコンテスト
">
    <meta name="author" content="Atcoder" />
    <meta name="copyright" content="Copyright (C) 2012 Atcoder" />
    <meta name="format-detection" content="telephone=no" />

    <link rel="stylesheet" type="text/css" href="/css/all.css?v=2">
    <link rel="stylesheet" type="text/css" href="/css/print.css?v=1" media="print">
        <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script src="/js/jquery.js"></script>
    <link rel="shortcut icon" href="/img/favicon.ico">

    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30554866-3']);
  _gaq.push(['_setDomainName', 'atcoder.jp']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>    
    <!--[if lt IE 9]><style>.navbar-fixed-top{ position: relative!important; }</style><![endif]-->

  </head>


  <body>
          <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
              <a class="brand" href="/"><span class="contest-name">industry test 08 月 15 日 4 回目</span><span class="bland-small"><time>2015/08/15 11:00:00 +0000</time> ~ <time>2015/08/15 13:00:00 +0000</time></span></a>
      
      <div class="nav-collapse">
                            <ul  id="nav-right-logined" class="nav pull-right" style="display:none;">
            <li class="dropdown">
              <a href="#" lang="ja" class="dropdown-toggle static-nav-language-selector-dropdown" data-toggle="dropdown" style="display:none;">
                <i class="flag-ja"></i> 日本語 <b class="caret"></b>
              </a>
              <a href="#" lang="en" class="dropdown-toggle static-nav-language-selector-dropdown"  data-toggle="dropdown" style="display:none;">
                <i class="flag-en"></i> English <b class="caret"></b>
              </a>
              <a href="#" lang="ko" class="dropdown-toggle static-nav-language-selector-dropdown"  data-toggle="dropdown" style="display:none;">
                <i class="flag-ko"></i> 한국어 <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li> <a lang="ja" class="static-nav-language-selector" href="#"><i class="flag-ja"></i> 日本語</a></li>
                <li> <a lang="en" class="static-nav-language-selector" href="#"><i class="flag-en"></i> English</a></li>
                <li> <a lang="ko" class="static-nav-language-selector" href="#"><i class="flag-ko"></i> 한국어</a></li>
              </ul>
            </li>
            <li class="divider-vertical"></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-cog icon-white"></i> <span id="nav-right-username"></span><b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/me">マイプロフィール</a></li>
                                	<li><a href="/settings"><span class="lang"><span class="lang-en">Settings</span><span class="lang-ja">設定</span></span></a></li>
                	                	<li><a href="/settings/password"><span class="lang"><span class="lang-en">Change password</span><span class="lang-ja">パスワードの変更</span></span></a></li>
                	<li class="divider"></li>
                                <li><a href="/logout"><span class="lang"><span class="lang-en">Sign out</span><span class="lang-ja">ログアウト</span></span></a></li>
             </ul>
            </li>
          </ul>
          <ul id="nav-right-not-login" class="nav pull-right" style="display:none;">
            <li class="dropdown">
              <a href="#" lang="ja" class="dropdown-toggle static-nav-language-selector-dropdown" data-toggle="dropdown" style="display:none;">
                <i class="flag-ja"></i> 日本語 <b class="caret"></b>
              </a>
              <a href="#" lang="en" class="dropdown-toggle static-nav-language-selector-dropdown"  data-toggle="dropdown" style="display:none;">
                <i class="flag-en"></i> English <b class="caret"></b>
              </a>
              <a href="#" lang="ko" class="dropdown-toggle static-nav-language-selector-dropdown"  data-toggle="dropdown" style="display:none;">
                <i class="flag-ko"></i> 한국어 <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li> <a lang="ja" class="static-nav-language-selector" href="#"><i class="flag-ja"></i> 日本語</a></li>
                <li> <a lang="en" class="static-nav-language-selector" href="#"><i class="flag-en"></i> English</a></li>
                <li> <a lang="ko" class="static-nav-language-selector" href="#"><i class="flag-ko"></i> 한국어</a></li>
              </ul>
            </li>
                        <li class="divider-vertical"></li>
            <li><a href="/register"><span class="lang"><span class="lang-en">Sign up</span><span class="lang-ja">新規登録</span></span></a></li>
                        <li class="divider-vertical"></li>
            <li><a href="/login"><span class="lang"><span class="lang-en">Sign in</span><span class="lang-ja">ログイン</span></span></a></li>
            </li>
          </ul>
      </div>
    </div>
  </div>
</div>
    <div class="modal hide fade" style="display:none;" id="modal-contest-end">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3><span class="lang"><span class="lang-en">industry test 08 月 15 日 4 回目 has ended</span><span class="lang-ja">industry test 08 月 15 日 4 回目が終了しました</span></span></h3>
  </div>
  <div class="modal-body">
    <p><span class="lang"><span class="lang-en">Contest has ended</span><span class="lang-ja">コンテスト終了です</span></span></p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal"><span class="lang"><span class="lang-en">Close</span><span class="lang-ja">閉じる</span></span></a>
  </div>
</div>

<div class="modal hide fade" style="display:none;" id="modal-contest-begin">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3><span class="lang"><span class="lang-en">industry test 08 月 15 日 4 回目 is now opening</span><span class="lang-ja">industry test 08 月 15 日 4 回目の開催時間になりました</span></span></h3>
  </div>
  <div class="modal-body">
    <p><span class="lang"><span class="lang-en">Contest has started</span><span class="lang-ja">問題一覧のページへ移動してください</span></span></p>
  </div>
  <div class="modal-footer">
    <a href="/assignments" class="btn btn-primary"><span class="lang"><span class="lang-en">Go to the task list page</span><span class="lang-ja">問題一覧のページへ移動</span></span></a>
  </div>
</div>
    
    <div id="outer-inner" class="container">
      <h1 class="site-title">
          industry test 08 月 15 日 4 回目
      </h1>
                      <time style="display:none" id="contest-start-time">2015/08/15 11:00:00 +0000</time>
        <time style="display:none" id="contest-end-time">2015/08/15 13:00:00 +0000</time>
        <time style="display:none" id="server-current-time">2015/08/15 11:05:21 +0000</time>

            
      <ul class="nav nav-tabs">
                            <li><a href="http://industry-2015-0815-4.contest.atcoder.jp/"><i class="icon-home"></i> <span class="lang"><span class="lang-en">Home</span><span class="lang-ja">トップページ</span><span class="lang-ko">톱 페이지</span></span></a></li>
                                          <li class="active"><a href="http://industry-2015-0815-4.contest.atcoder.jp/assignments"><i class="icon-list-alt"></i> <span class="lang"><span class="lang-en">Tasks</span><span class="lang-ja">問題</span><span class="lang-ko">문제</span></span></a></li>
                                          <li><a href="https://industry-2015-0815-4.contest.atcoder.jp/submit"><i class="icon-upload"></i> <span class="lang"><span class="lang-en">Submit</span><span class="lang-ja">提出</span><span class="lang-ko">제출</span></span></a></li>
                                          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <b class="caret"></b><i class="icon-download-alt"></i> <span class="lang"><span class="lang-en">Results</span><span class="lang-ja">結果</span><span class="lang-ko">채점 결과</span></span>
            </a>
            <ul class="dropdown-menu">
                              <li><a href="https://industry-2015-0815-4.contest.atcoder.jp/submissions/me"><span class="lang"><span class="lang-en">My submissions</span><span class="lang-ja">自分の結果</span><span class="lang-ko">자신의 결과</span></span></a></li>
                          </ul>
          </li>
                      </ul>
        <div id="alert_box" class="alert alert-block" style="display:none">
  <a class="close" data-dismiss="alert">×</a>
  <h4 id="alert_box_heading" class="alert-heading" style="display:none"></h4>
  <p id="alert_box_content"></p>
</div>

      <h2>C - 建設/Construction</h2>
<hr />
<p><span class="lang"><span class="lang-en">Time limit</span><span class="lang-ja">時間制限</span></span> : 2sec / <span class="lang"><span class="lang-en">Stack limit</span><span class="lang-ja">スタック制限</span></span> : 256MB / <span class="lang"><span class="lang-en">Memory limit</span><span class="lang-ja">メモリ制限</span></span> : 256MB</p>

<div id="task-statement">
  <span class="lang">
    <span class="lang-ja">
<div class="part">

    <section>
        <h3>問題文</h3>

        <p><var>1</var> から <var>N</var> の番号が付けられた <var>N</var> 個の島があります． <var>Q</var> 日間，毎日以下の <var>2</var> 種類のクエリのうち <var>1</var> つが与えられるので，与えられた順番に処理するプログラムを書いて下さい．</p>

        <p>(クエリ <var>1</var>) <code>build A B</code></p>

        <ul class="simple">

            <li>島 <var>A</var> と島 <var>B</var> の間に双方向に渡ることの出来る橋を建設する．このクエリが与えられる時点で，島 <var>A</var> と島 <var>B</var> を直接結ぶ橋は存在しないことが保障されている．また，初期状態においてどの島の間にも橋は建設されていない．</li>

        </ul>

        <p>(クエリ <var>2</var>) <code>check A B</code></p>

        <ul class="simple">

            <li>いくつかの橋を渡って島 <var>A</var> から島 <var>B</var> に行くことが出来るかどうかを判定する．</li>

            <li>
                行くことが出来る場合は，渡る橋のうち最も古く建設された橋の建設日を出力する．ただし，渡り方が複数通りある場合は，
                <strong>渡らなければならない最も古く建設された橋</strong>
                が
                <strong>最も新しくなるような</strong>
                渡り方を考える．
            </li>

            <li>行くことが出来る場合はさらにその後，その最も古く建設された橋を取り壊す．この取り壊しによってその橋は存在しなくなる．取り壊しは一瞬で完了する．</li>

        </ul>

    </section>
</div>
<hr />
<div class="io-style">
    <div class="part">

        <section>
            <h3>入力</h3>

            <p>入力は以下の形式で標準入力から与えられる．</p>

<pre>
<var>N</var> <var>Q</var>
<var>Query_1</var>
<var>Query_2</var>
:
<var>Query_Q</var>
</pre>

            <ul class="simple">

                <li><var>1</var> 行目には，島の数を表す整数 <var>N (1 ≦ N ≦ 50)</var> とクエリが与えられる日数を表す整数 <var>Q (1 ≦ Q ≦ 500)</var> がスペース区切りで与えられる．</li>

                <li><var>2</var> 行目から <var>Q</var> 行には，毎日のクエリの情報が与えられる． そのうち<var>i (1≦i≦Q)</var> 行目には，<var>i</var> 日目のクエリの内容 <var>Query_i</var> が書かれている．<var>Query_i</var> は，<code>build A B</code> の形式もしくは <code>check A B</code> の形式で与えられる(<var>1≦A,B≦N かつ A≠B</var>)．<code>build A B</code> の形式のクエリが与えられる時点で，<var>A</var> と <var>B</var>の間に橋は存在しない．</li>

            </ul>

        </section>
    </div>
    <div class="part">

        <section>
            <h3>出力</h3>

            <p><code>check A B</code> の形式のクエリが与えられる度に，島 <var>A</var> から 島 <var>B</var> に行くことが出来るならば，渡る橋のうち最も古く建設された橋の建設日を <var>X</var> として， <code>YES X</code>の形式で出力せよ．そうでないならば <code>NO</code> と出力せよ．</p>

            <p>末尾の改行を忘れないこと．</p>

        </section>
    </div>
</div>
<hr />
<div class="part">

    <section>
        <h3>入力例1</h3>

<pre>
5 7
build 1 2
check 1 2
build 2 3
check 1 2
build 3 4
check 2 4
check 1 5
</pre>

    </section>
</div>
<div class="part">

    <section>
        <h3>出力例1</h3>

<pre>
YES 1
NO
YES 3
NO
</pre>

    </section>
</div>
<hr />
<div class="part">

    <section>
        <h3>入力例2</h3>

<pre>
3 7
build 1 3
build 1 2
build 2 3
check 1 3
check 1 3
check 1 3
check 2 3
</pre>

    </section>
</div>
<div class="part">

    <section>
        <h3>出力例2</h3>

<pre>
YES 2
YES 1
NO
YES 3
</pre>

    </section>
</div>
<hr />
<div class="part">

    <section>
        <h3>入力例3</h3>

<pre>
5 30
build 1 5
build 3 4
build 4 5
build 5 2
build 3 1
check 5 2
build 3 5
build 2 5
build 3 2
build 4 2
build 4 1
check 4 1
build 1 2
build 4 1
check 1 5
build 5 2
check 5 3
build 2 3
check 5 1
build 2 1
check 2 3
build 2 3
check 3 1
build 2 1
check 3 5
build 5 2
check 5 1
build 1 2
check 4 5
build 1 4
</pre>

    </section>
</div>
<div class="part">

    <section>
        <h3>出力例3</h3>

<pre>
YES 4
YES 11
YES 8
YES 9
YES 13
YES 18
YES 20
YES 16
YES 24
YES 14
</pre>

    </section>
</div>
</span>

    <span class="lang-en">
    <div class="part">

        <section>
            <h3>Question</h3>

            <p>There are <var>N</var> islands that are numbered from <var>1</var> to <var>N</var>. For <var>Q</var> days, either one of the following two queries will be given every day. Write a program that processes them in given order.</p>

            <p>(Query <var>1</var>)  <code>build A B</code></p>

            <ul class="simple">

                <li>Construct a bridge that will allow one to cross between island <var>A</var> and island <var>B</var> in both directions. At the point this query is given, it is guaranteed that there is no existing bridge between island <var>A</var> and island <var>B</var>. Initially, no bridge has been constructed between any islands.</li>

            </ul>

            <p>(Query <var>2</var>)  <code>check A B</code></p>

            <ul class="simple">
                <li>Determine whether one can get from island <var>A</var> to island <var>B</var>  by crossing any number of bridges.</li>

                <li>If one can do so, a) output the construction date for the oldest bridge out of all the bridges one crosses. 　In the case that there are several routes, find the route in which the oldest bridge you need to cross is the newest among any alternative route.  Then, b)  demolish the oldest bridge defined above. This bridge will no longer exist after demolition.</li>
                </ul>
        </section>
    </div>
    <hr />
    <div class="io-style">
        <div class="part">

            <section>
                <h3>Input</h3>

                <p>Input will be given in the following format from Standard Input:</p>

<pre>
<var>N</var> <var>Q</var>
<var>Query_1</var>
<var>Query_2</var>
:
<var>Query_Q</var>
</pre>

                <ul class="simple">

                    <li>On the 1st line, integer <var>N (1 ≦ N ≦ 50)</var>, which represents the number of islands, and integer <var>Q (1 ≦ Q ≦ 500)</var>, the number of days that queries are given, will be given. They are separated by space.</li>

                    <li>From 2nd line to <var>Q</var> th line, the information of each day’s queries will be given. Among them, on the <var>i (1≦i≦Q)</var> th line, the content of query <var>Query_i</var> on the <var>i</var> th day is written. <var>Query_i</var> is given either in the format of <code>build A B</code> or <code>check A B</code> (<var>1≦A,B≦N</var> and <var>A≠B</var>). At the point that the query of the <code>build A B</code> format is given, there is no existing bridge between <var>A</var> and <var>B</var>.</li>

                </ul>

            </section>
        </div>
        <div class="part">

            <section>
                <h3>Output</h3>

                <p>Each time the <code>check A B</code> format is given, if one can get from island <var>A</var> to island <var>B</var>, define the construction date of the oldest bridge as <var>X</var>, and output as the <code>YES X</code> format. If not, output <code>NO</code>.</p>

                <p>Make sure to insert a line break at the end of the output.</p>

            </section>
        </div>
    </div>
    <hr />
    <div class="part">

        <section>
            <h3>Input Example #1</h3>

<pre>
5 7
build 1 2
check 1 2
build 2 3
check 1 2
build 3 4
check 2 4
check 1 5
</pre>

        </section>
    </div>
    <div class="part">

        <section>
            <h3>Output Example #1</h3>

<pre>
YES 1
NO
YES 3
NO
</pre>

        </section>
    </div>
    <hr />
    <div class="part">

        <section>
            <h3>Input Example #2</h3>

<pre>
3 7
build 1 3
build 1 2
build 2 3
check 1 3
check 1 3
check 1 3
check 2 3
</pre>

        </section>
    </div>
    <div class="part">

        <section>
            <h3>Output Example #2</h3>

<pre>
YES 2
YES 1
NO
YES 3
</pre>

        </section>
    </div>
    <hr />
    <div class="part">

        <section>
            <h3>Input Example #3</h3>

<pre>
5 30
build 1 5
build 3 4
build 4 5
build 5 2
build 3 1
check 5 2
build 3 5
build 2 5
build 3 2
build 4 2
build 4 1
check 4 1
build 1 2
build 4 1
check 1 5
build 5 2
check 5 3
build 2 3
check 5 1
build 2 1
check 2 3
build 2 3
check 3 1
build 2 1
check 3 5
build 5 2
check 5 1
build 1 2
check 4 5
build 1 4
</pre>

        </section>
    </div>
    <div class="part">

        <section>
            <h3>Output Example #3</h3>

<pre>
YES 4
YES 11
YES 8
YES 9
YES 13
YES 18
YES 20
YES 16
YES 24
YES 14
</pre>

        </section>
    </div>
        </span>
</span>

</div>


<hr/>
<p><a class="btn btn-primary btn-large" href="/submit?task_id=1155"><span class="lang"><span class="lang-en">Submit</span><span class="lang-ja">提出する</span></span></a></p>

    </div>

    <footer>
        <div id="atcoder-default-lang" style="display: none;" data-lang="en"></div>
<ul>
  <li><a href="/tutorial"><span class="lang"><span class="lang-en">Tutorial</span><span class="lang-ja">チュートリアル</span></span></a></li>
  <li><a href="/rules"><span class="lang"><span class="lang-en">Rules</span><span class="lang-ja">ルール</span></span></a></li>
  <li><a href="/glossary"><span class="lang"><span class="lang-en">Glossary</span><span class="lang-ja">用語集</span></span></a></li>
  <li><a href="/faq"><span class="lang"><span class="lang-en">FAQ</span><span class="lang-ja">よくある質問</span></span></a></li>
</ul>
<p id="copyright">Powered by <a href="http://atcoder.jp">AtCoder.</a></p>
    </footer>

    <p id="fixed-server-timer" style="display: none;"></p>

        <script src="/js/bootstrap.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/lang-vb.js"></script>
    <script src="/js/lang-hs.js"></script>
    <script src="/js/varmath.js"></script>
    <script src="/js/script.js?v=2"></script>
  </body>
</html>
